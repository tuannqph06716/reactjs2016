{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-basic-master\\\\src\\\\pages\\\\views\\\\Admin\\\\Gallery\\\\index.js\";\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport Axios from 'axios';\nimport firebase from '../../../../firebase';\n\nconst Gallery = ({\n  lastProducts\n}) => {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [newDb, setNewDb] = useState([]);\n  console.log(lastProducts);\n\n  const Ga = data => {\n    console.log(data);\n    console.log(data.image);\n\n    for (let i = 0; i < data.image.length; i++) {\n      let file = data.image[i];\n      console.log(file);\n      let storageRef = firebase.storage().ref(`images/${file.name}`);\n      storageRef.put(file).then(function () {\n        storageRef.getDownloadURL().then(url => {\n          console.log(url); // Tạo object mới chứa toàn bộ thông tin từ input\n\n          const DB = {\n            id: Math.random().toString(36).substr(2, 9),\n            ...data,\n            image: url,\n            id_products: lastProducts\n          };\n          console.log(DB);\n          setNewDb(DB);\n        });\n      });\n      console.log(newDb);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(Ga),\n    encType: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"short_detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 19\n    }\n  }, \"image\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"file\",\n    multiple: true,\n    id: \"image\",\n    placeholder: \"Nh\\u1EADp \\u1EA3nh\",\n    name: \"image\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-sm btn-primary\",\n    name: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }\n  }, \"L\\u01B0u\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"reset\",\n    value: \"Reset\",\n    className: \"btn btn-sm btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 19\n    }\n  }, \"H\\u1EE7y\"))));\n};\n\nexport default Gallery;","map":{"version":3,"sources":["D:/react-basic-master/src/pages/views/Admin/Gallery/index.js"],"names":["React","useState","useForm","Axios","firebase","Gallery","lastProducts","register","handleSubmit","errors","newDb","setNewDb","console","log","Ga","data","image","i","length","file","storageRef","storage","ref","name","put","then","getDownloadURL","url","DB","id","Math","random","toString","substr","id_products","required"],"mappings":"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","sourcesContent":["import React,{useState} from \"react\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport Axios from 'axios'\r\nimport firebase from '../../../../firebase';\r\nconst Gallery=({lastProducts})=>{\r\n    const {register, handleSubmit, errors}=useForm();\r\n    const [newDb, setNewDb]=useState([]);\r\n\r\n    console.log(lastProducts);\r\n    const Ga = (data) =>{\r\n        console.log(data);\r\n        console.log(data.image);\r\n        for(let i=0;i<data.image.length;i++){\r\n              let file= data.image[i];\r\n              console.log(file);\r\n              let storageRef = firebase.storage().ref(`images/${file.name}`);\r\n              storageRef.put(file).then(function () {\r\n                storageRef.getDownloadURL().then((url) => {\r\n                    console.log(url);\r\n                    // Tạo object mới chứa toàn bộ thông tin từ input\r\n                    const DB = {\r\n                        id: Math.random().toString(36).substr(2, 9),\r\n                        ...data,\r\n                        image: url,\r\n                        id_products: lastProducts\r\n                    }\r\n                    console.log(DB);\r\n                    setNewDb(DB);\r\n            })\r\n          })\r\n\r\n          console.log(newDb);\r\n\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n        <form onSubmit={handleSubmit(Ga)} encType=\"multipart/form-data\">\r\n            <div className=\"form-group\">\r\n                  <label htmlFor=\"short_detail\">image</label>\r\n                  <div>  \r\n                    <input className=\"form-control\"type=\"file\" multiple  id=\"image\" placeholder=\"Nhập ảnh\" name=\"image\" ref={register({required:true})} />\r\n\r\n                  </div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                  <button type=\"submit\" className=\"btn btn-sm btn-primary\" name=\"submit\">Lưu</button>\r\n                  <button type=\"reset\" value=\"Reset\" className=\"btn btn-sm btn-primary\">Hủy</button>\r\n                </div>\r\n        </form>\r\n        </div>\r\n    )\r\n}\r\nexport default Gallery"]},"metadata":{},"sourceType":"module"}